{"version":3,"sources":["PhotoServiceContext.js","HeaderBreadcrumb.js","AlbumsList.js","ViewPhoto.js","Modal.js","ImageModal.js","ViewAlbum.js","About.js","GooglePhotosService.js","App.js","serviceWorker.js","index.js"],"names":["context","createContext","undefined","HeaderBreadcrumb","props","react_default","a","createElement","className","albumDetails","title","photoDetails","react_router_dom","to","albumID","albumTitle","concat","filename","split","AlbumsList","service","useContext","PhotoServiceContext","_useState","useState","_useState2","Object","slicedToArray","albums","setAlbums","_useState3","_useState4","isLoading","setIsLoading","useEffect","loadAlbums","then","arg","newAlbums","map","obj","key","id","src","coverPhotoBaseUrl","alt","length","console","log","src_HeaderBreadcrumb","ViewPhoto","photoID","photoNumber","photosTotal","setPhotoDetails","loadPhotoDetail","match","baseUrl","modalRoot","document","getElementById","Modal","el","setAttribute","appendChild","removeChild","ReactDOM","createPortal","children","ImageModal","src_Modal","onClick","e","handleClose","ViewAlbum","params","aid","setAlbumDetails","_useState5","_useState6","shown","setShown","_useState7","_useState8","selectedPhotoID","setSelectedPhotoID","_useState9","_useState10","selectedPhotoNumber","setSelectedPhotoNumber","handleClick","pid","arguments","pnumber","preventDefault","targetClassName","target","parseInt","loadAlbumDetail","mediaItems","mediaItem","itemIndex","href","src_ImageModal","src_ViewPhoto","mediaItemsCount","About","GooglePhotosService","gapiClient","classCallCheck","this","photoslibrary","list","fullResponse","result","_this","get","albumId","response","album","search","objectSpread","catch","mediaItemId","SCOPE","App","initialising","setInitialising","isAuthorised","setIsAuthorised","photoService","setPhotoService","intervalId","setInterval","window","gapi","clearInterval","load","client","init","discoveryDocs","clientId","gapiID","scope","auth","auth2","getAuthInstance","isSignedIn","listen","user","hasGrantedScopes","currentUser","startAuth","onSignOut","useCallback","signOut","onSignIn","signIn","Provider","value","react_router","path","exact","component","Boolean","location","hostname","render","src_App","process","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.eae520eb.chunk.js","sourcesContent":["import { createContext } from 'react'\r\n\r\nconst context = createContext(undefined)\r\n\r\nexport default context\n","import React from 'react'\r\nimport './HeaderBreadcrumb.scss'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction HeaderBreadcrumb (props) {\r\n  return (\r\n    <div className=\"header\">\r\n        <h2>\r\n          { (props.albumDetails && props.albumDetails.title) || props.photoDetails ? \r\n            <Link to='/'>Albums</Link>\r\n            : \"Albums\"\r\n          }\r\n          { props.albumDetails && props.albumDetails.title &&\r\n            <span>\r\n               &nbsp;&raquo;&nbsp;\r\n               { props.albumDetails.title }\r\n            </span>\r\n          }\r\n          {\r\n            props.photoDetails && props.albumID && props.albumTitle && \r\n            <span>\r\n               &nbsp;&raquo;&nbsp;\r\n               <Link to={ `/album/${ props.albumID }` }>\r\n                 { props.albumTitle }\r\n               </Link>\r\n            </span>\r\n          }\r\n          {\r\n            props.photoDetails && \r\n            <span>\r\n               &nbsp;&raquo; { (props.photoDetails.filename).split(\".\")[0] }\r\n            </span>\r\n          }          \r\n        </h2>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HeaderBreadcrumb\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport './AlbumsList.scss'\r\nimport { Link } from 'react-router-dom'\r\nimport PhotoServiceContext from './PhotoServiceContext'\r\nimport HeaderBreadcrumb from './HeaderBreadcrumb'\r\n\r\nfunction AlbumsList () {\r\n  const service = useContext(PhotoServiceContext) // new GooglePhotosService();\r\n  const [albums, setAlbums] = useState([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  // useEffect only runs once to get the promise data initially.\r\n  useEffect(function () {\r\n    const promise = service.loadAlbums()\r\n    promise.then(function (arg) {\r\n      setAlbums(arg)\r\n      setIsLoading(false)\r\n    })\r\n  },\r\n  [service]\r\n  )\r\n\r\n  const newAlbums = albums.map( function (obj){\r\n    return (\r\n      <li key={obj.id}>\r\n        <Link to={'/album/' + obj.id}>\r\n          <figure>\r\n            <img src={obj.coverPhotoBaseUrl} alt=\"\" />            \r\n            <figcaption>\r\n              <h3>\r\n                { obj.title }\r\n              </h3>\r\n            </figcaption>\r\n          </figure>\r\n        </Link>\r\n        <br />\r\n      </li>\r\n    );\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      { isLoading && 'Loading...' }\r\n      { albums.length > 0 &&\r\n        <div>\r\n          { console.log('AlbumsList albums', albums) }\r\n\r\n          <HeaderBreadcrumb />\r\n          \r\n          <ul className=\"albums\">\r\n            { newAlbums }\r\n          </ul>\r\n        </div>\r\n      }\r\n\r\n      <hr />\r\n      <Link to='/'>Back to Albums List</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AlbumsList\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport PhotoServiceContext from './PhotoServiceContext'\r\nimport './ViewPhoto.scss'\r\n\r\nfunction ViewPhoto (props) {\r\n  const photoID = props.photoID; //props.match.params.pid\r\n  const photoNumber = props.photoNumber\r\n  const photosTotal = props.photosTotal\r\n  console.log('ViewPhoto -', photoID, photoNumber, photosTotal)\r\n\r\n  const service = useContext(PhotoServiceContext)\r\n  const [photoDetails, setPhotoDetails] = useState(undefined)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  useEffect(\r\n    function () {\r\n      const promise = service.loadPhotoDetail(photoID)\r\n      promise.then(function (arg) {\r\n        setPhotoDetails(arg)\r\n        setIsLoading(false)\r\n      })\r\n    },\r\n    [props.match, service, photoID] // keep watching this for changes\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      { isLoading && \r\n        <figure>\r\n          <figcaption>\r\n            'Loading...' \r\n          </figcaption>\r\n        </figure>      \r\n      }\r\n      { !isLoading && photoDetails &&\r\n        <figure>\r\n          <img src={photoDetails.baseUrl} alt=\"\" />            \r\n          <figcaption>\r\n            { photoNumber } of { photosTotal }\r\n          </figcaption>\r\n        </figure>\r\n      }\r\n      { !isLoading && !photoDetails &&\r\n        <figure>\r\n          <figcaption>\r\n            Photo not found\r\n          </figcaption>\r\n        </figure>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewPhoto\r\n","import React, { useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\n// Source: https://www.thomasmaximini.com/building-fullscreen-overlays-with-react-16-portals\r\n// use the same div here that I mount my app into\r\n// so the modal will be a sibling of the rest of the app\r\n// in the DOM hierachy\r\nconst modalRoot = document.getElementById('root');\r\n\r\nfunction Modal (props) {\r\n  // constructor\r\n  const el = document.createElement('div');\r\n  el.setAttribute(\"id\", \"modal\")\r\n\r\n  // Similar to componentDidMount and componentDidUpdate\r\n  useEffect( function (){\r\n    modalRoot.appendChild( el );\r\n\r\n    // Equivalent to componentWillUnmount\r\n    // Specify how to clean up after this effect:\r\n    return function cleanup() {      \r\n      modalRoot.removeChild( el );\r\n    };\r\n  });\r\n\r\n  return ReactDOM.createPortal( props.children, el);\r\n}\r\n\r\nexport default Modal","import React from 'react'\r\nimport Modal from './Modal';\r\nimport './ImageModal.scss'\r\n\r\n// props.children renders child nodes within ImageModal \r\nfunction ImageModal (props) {\r\n  return (\r\n    <Modal>\r\n      <div className=\"wrapper\" onClick={ (e) => { props.handleClose(e) } } >{/* className={ props.shown ? '' : 'hidden' } */}\r\n        <div className=\"inner\">\r\n          { props.children }\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ImageModal","import React, { useState, useEffect, useContext } from 'react'\r\nimport './ViewAlbum.scss'\r\nimport { Link } from 'react-router-dom'\r\n// import DummyGooglePhotosService from './DummyGooglePhotosService';\r\nimport PhotoServiceContext from './PhotoServiceContext'\r\nimport HeaderBreadcrumb from './HeaderBreadcrumb'\r\nimport ViewPhoto from './ViewPhoto'\r\nimport ImageModal from './ImageModal'\r\n\r\nfunction ViewAlbum (props) {\r\n  console.log('ViewAlbum props', props)\r\n  const albumID = props.match.params.aid\r\n\r\n  // const service = new DummyGooglePhotosService();\r\n  const service = useContext(PhotoServiceContext)\r\n\r\n  const [albumDetails, setAlbumDetails] = useState(undefined)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [shown, setShown] = useState(false)\r\n  const [selectedPhotoID, setSelectedPhotoID] = useState(undefined)\r\n  const [selectedPhotoNumber, setSelectedPhotoNumber] = useState(undefined)\r\n\r\n  const handleClick = (e, pid=undefined, pnumber=undefined) => {\r\n    e.preventDefault(); // cancel default behaviour of opening a link\r\n    const targetClassName = e.target.className; // .tagName.toLowerCase()\r\n\r\n    if( shown ){\r\n      if( targetClassName===\"inner\" || targetClassName===\"wrapper\" ){\r\n        setShown( false )\r\n      }\r\n    } else {\r\n      setSelectedPhotoID( pid )\r\n      setSelectedPhotoNumber( parseInt(pnumber) + 1 )\r\n      setShown( true )\r\n    }\r\n  };\r\n\r\n  /* Modal resource: https://www.thomasmaximini.com/building-fullscreen-overlays-with-react-16-portals */\r\n  const renderModal = () => {\r\n    return (\r\n      <ImageModal handleClose={ handleClick } shown={ shown }>\r\n        <ViewPhoto \r\n          photoID={ selectedPhotoID } \r\n          photoNumber={ selectedPhotoNumber } \r\n          photosTotal={ albumDetails.mediaItemsCount } \r\n        />\r\n      </ImageModal>\r\n    );\r\n  }\r\n\r\n  useEffect(\r\n    function () {\r\n      const promise = service.loadAlbumDetail(albumID)\r\n      promise.then(function (arg) {\r\n        setAlbumDetails(arg)\r\n        setIsLoading(false)\r\n      })\r\n    },\r\n    [props.match, service, albumID] // keep watching this for changes\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      { isLoading && \r\n        <span>\r\n          'Loading...'\r\n        </span>\r\n      }\r\n      { !isLoading && albumDetails &&\r\n        <div>\r\n          <HeaderBreadcrumb albumDetails={ albumDetails } />\r\n          \r\n          <ul>\r\n            { albumDetails.mediaItems.map( function (mediaItem, itemIndex){\r\n              return (\r\n                <li key={mediaItem.id}>\r\n                  <a href=\"#\" onClick={ (e) => {handleClick(e, mediaItem.id, itemIndex)} } >{/* onClick={ (e) => {renderModal(mediaItem.id, itemIndex, e)} } */}\r\n                    <figure>\r\n                      <img src={mediaItem.baseUrl} alt='' />\r\n                    </figure>                  \r\n                  </a>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n\r\n          { shown &&\r\n            renderModal() \r\n          }\r\n        </div>\r\n      }\r\n      { !isLoading && !albumDetails &&\r\n        <span>Album not found</span>\r\n      }      \r\n\r\n      <hr />\r\n      <Link to='/'>Back to Albums List</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewAlbum\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction About () {\r\n  return <div>\r\n      This site was made with React 16.8 and Google Photos API.\r\n    <br />\r\n    <Link to='/'>Back</Link>\r\n  </div>\r\n}\r\n\r\nexport default About\r\n","class GooglePhotosService {\r\n  constructor (gapiClient) {\r\n    this.gapiClient = gapiClient\r\n  }\r\n\r\n  loadAlbums () {\r\n    return this.gapiClient\r\n      .photoslibrary\r\n      .albums\r\n      .list({})\r\n      .then(function (fullResponse) { // { result: { albums } }\r\n        const albums = fullResponse.result.albums\r\n        // Handle the results here (response.result has the parsed body).\r\n        return albums\r\n      })\r\n  }\r\n\r\n  loadAlbumDetail (id) {\r\n    return this.gapiClient\r\n      .photoslibrary\r\n      .albums\r\n      .get({ albumId: id })\r\n      .then((response) => {\r\n        return response.result\r\n      })\r\n      .then((album) => {\r\n        return this.gapiClient\r\n          .photoslibrary\r\n          .mediaItems\r\n          .search({ albumId: id })\r\n          .then(function (response) {\r\n            const mediaItems = response.result.mediaItems\r\n\r\n            return {\r\n              ...album,\r\n              mediaItems: mediaItems\r\n            }\r\n          })\r\n      })\r\n      .catch(function (e) {\r\n        return undefined\r\n      })\r\n  }\r\n\r\n  loadPhotoDetail (id) {\r\n    return this.gapiClient\r\n      .photoslibrary\r\n      .mediaItems\r\n      .get({ mediaItemId: id })\r\n      .then((response) => {\r\n        return response.result\r\n      })\r\n      .catch(function (e) {\r\n        return undefined\r\n      })\r\n  }\r\n}\r\n\r\nexport default GooglePhotosService\r\n","/* global gapi */\nimport React, { useEffect, useCallback, useState } from 'react'\nimport './App.scss'\nimport AlbumsList from './AlbumsList'\nimport ViewAlbum from './ViewAlbum'\nimport About from './About'\nimport { HashRouter as Router, Route } from 'react-router-dom'\nimport PhotoServiceContext from './PhotoServiceContext'\n// import DummyGooglePhotosService from './DummyGooglePhotosService';\nimport GooglePhotosService from './GooglePhotosService'\n\nconst SCOPE = 'https://www.googleapis.com/auth/photoslibrary.readonly'\n\nfunction App (props) {\n  const [initialising, setInitialising] = useState(true)\n  const [isAuthorised, setIsAuthorised] = useState(false)\n  const [photoService, setPhotoService] = useState(undefined)\n\n  useEffect(\n    () => {\n      console.log('we\\'ve mounted')\n      \n      const intervalId = setInterval(\n        () => {\n          if (!window.gapi) {\n            return\n          }\n\n          clearInterval(intervalId)\n          gapi.load('client:auth2', () => {\n            gapi.client.init({\n              discoveryDocs: ['https://photoslibrary.googleapis.com/$discovery/rest?version=v1'],\n              clientId: props.gapiID,\n              scope: SCOPE\n            }).then(function () {\n              setInitialising(false)\n\n              const auth = gapi.auth2.getAuthInstance()\n              auth.isSignedIn.listen(() => {\n                setIsAuthorised(user.hasGrantedScopes(SCOPE))\n              })\n\n              const user = auth.currentUser.get()\n              const startAuth = user.hasGrantedScopes(SCOPE)\n              setPhotoService(new GooglePhotosService(gapi.client))\n              setIsAuthorised(startAuth)\n\n              // gapi.client.photoslibrary.albums.list({})\n              //   .then(function(response) {\n              //     // Handle the results here (response.result has the parsed body).\n              //     console.log(\"Album Response\", response);\n              //   });\n            })\n          })\n        },\n        100\n      )\n    },\n    [props.gapiID]\n  )\n\n  const onSignOut = useCallback(\n    () => {\n      gapi.auth2.getAuthInstance().signOut()\n    },\n    []\n  )\n\n  const onSignIn = useCallback(\n    () => {\n      gapi.auth2.getAuthInstance().signIn()\n    },\n    []\n  )\n\n  if (initialising) {\n    return <div>Initialising...</div>\n  }\n\n  if (!isAuthorised) {\n    return <button onClick={onSignIn}>Sign in</button>\n  }\n\n  return (\n    <div className='App'>\n      <PhotoServiceContext.Provider value={photoService}>\n        <Router>\n          <button onClick={onSignOut}>Sign Out</button>\n\n          <Route path='/' exact component={AlbumsList} />\n          <Route path='/album/:aid' component={ViewAlbum} />\n          <Route path='/about' component={About} />\n        </Router>\n      </PhotoServiceContext.Provider>\n    </div>\n  )\n}\n\nexport default App\n","/* global fetch */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App gapiID={process.env.REACT_APP_GAPI_CLIENT_ID} />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}