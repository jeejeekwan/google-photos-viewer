{"version":3,"sources":["PhotoServiceContext.js","HeaderBreadcrumb.js","AlbumsList.js","ViewAlbum.js","ViewPhoto.js","About.js","GooglePhotosService.js","App.js","serviceWorker.js","index.js"],"names":["context","createContext","undefined","HeaderBreadcrumb","props","react_default","a","createElement","className","albumDetails","title","photoDetails","react_router_dom","to","albumID","albumTitle","concat","filename","split","AlbumsList","service","useContext","PhotoServiceContext","_useState","useState","_useState2","Object","slicedToArray","albums","setAlbums","_useState3","_useState4","isLoading","setIsLoading","useEffect","loadAlbums","then","arg","newAlbums","map","obj","key","id","src","coverPhotoBaseUrl","src_HeaderBreadcrumb","ViewAlbum","match","params","aid","setAlbumDetails","loadAlbumDetail","mediaItems","mediaItem","baseUrl","alt","ViewPhoto","photoID","pid","atitle","setPhotoDetails","loadPhotoDetail","About","GooglePhotosService","gapiClient","classCallCheck","this","photoslibrary","list","fullResponse","result","_this","get","albumId","response","album","console","log","search","objectSpread","catch","e","mediaItemId","SCOPE","App","initialising","setInitialising","isAuthorised","setIsAuthorised","_useState5","_useState6","photoService","setPhotoService","intervalId","setInterval","window","gapi","clearInterval","load","client","init","discoveryDocs","clientId","gapiID","scope","auth","auth2","getAuthInstance","isSignedIn","listen","user","hasGrantedScopes","currentUser","startAuth","onSignOut","useCallback","signOut","onSignIn","signIn","Provider","value","onClick","react_router","path","exact","component","Boolean","location","hostname","ReactDOM","render","src_App","process","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a3f1a148.chunk.js","sourcesContent":["import { createContext } from 'react'\r\n\r\nconst context = createContext(undefined)\r\n\r\nexport default context\n","import React from 'react'\r\nimport './HeaderBreadcrumb.scss'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction HeaderBreadcrumb (props) {\r\n  return (\r\n    <div className=\"header\">\r\n        <h2>\r\n          { (props.albumDetails && props.albumDetails.title) || props.photoDetails ? \r\n            <Link to='/'>Albums</Link>\r\n            : \"Albums\"\r\n          }\r\n          { props.albumDetails && props.albumDetails.title &&\r\n            <span>\r\n               &nbsp;&raquo;&nbsp;\r\n               { props.albumDetails.title }\r\n            </span>\r\n          }\r\n          {\r\n            props.photoDetails && props.albumID && props.albumTitle && \r\n            <span>\r\n               &nbsp;&raquo;&nbsp;\r\n               <Link to={ `/album/${ props.albumID }` }>\r\n                 { props.albumTitle }\r\n               </Link>\r\n            </span>\r\n          }\r\n          {\r\n            props.photoDetails && \r\n            <span>\r\n               &nbsp;&raquo; { (props.photoDetails.filename).split(\".\")[0] }\r\n            </span>\r\n          }          \r\n        </h2>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HeaderBreadcrumb\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport './AlbumsList.scss'\r\nimport { Link } from 'react-router-dom'\r\nimport PhotoServiceContext from './PhotoServiceContext'\r\nimport HeaderBreadcrumb from './HeaderBreadcrumb'\r\n\r\nfunction AlbumsList () {\r\n  const service = useContext(PhotoServiceContext) // new GooglePhotosService();\r\n  const [albums, setAlbums] = useState([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  // useEffect only runs once to get the promise data initially.\r\n  useEffect(function () {\r\n    const promise = service.loadAlbums()\r\n    promise.then(function (arg) {\r\n      setAlbums(arg)\r\n      setIsLoading(false)\r\n    })\r\n  },\r\n  []\r\n  )\r\n\r\n  const newAlbums = albums.map( function (obj){\r\n    return (\r\n      <li key={obj.id}>\r\n        <Link to={'/album/' + obj.id}>\r\n          <figure>\r\n            <img src={obj.coverPhotoBaseUrl} />            \r\n            <figcaption>\r\n              <h3>\r\n                { obj.title }\r\n              </h3>\r\n            </figcaption>\r\n          </figure>\r\n        </Link>\r\n        <br />\r\n      </li>\r\n    );\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      { isLoading && 'Loading...' }\r\n      <div>\r\n        <HeaderBreadcrumb />\r\n        \r\n        <ul className=\"albums\">\r\n          { newAlbums }\r\n        </ul>\r\n      </div>\r\n\r\n      <hr />\r\n      <Link to='/'>Back to Albums List</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AlbumsList\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport './ViewAlbum.scss'\r\nimport { Link } from 'react-router-dom'\r\n// import DummyGooglePhotosService from './DummyGooglePhotosService';\r\nimport PhotoServiceContext from './PhotoServiceContext'\r\nimport HeaderBreadcrumb from './HeaderBreadcrumb'\r\n\r\nfunction ViewAlbum (props) {\r\n  const albumID = props.match.params.aid\r\n\r\n  // const service = new DummyGooglePhotosService();\r\n  const service = useContext(PhotoServiceContext)\r\n\r\n  const [albumDetails, setAlbumDetails] = useState(undefined)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  useEffect(\r\n    function () {\r\n      const promise = service.loadAlbumDetail(albumID)\r\n      promise.then(function (arg) {\r\n        setAlbumDetails(arg)\r\n        setIsLoading(false)\r\n      })\r\n    },\r\n    [props.match] // keep watching this for changes\r\n  )\r\n\r\n  // If the service is finished loading the album, but the album doesnt exist\r\n  if (!isLoading && !albumDetails) { // isLoaded && !albumDetails\r\n    return (\r\n      <div>\r\n        <h2>Album not found</h2>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      { isLoading && 'Loading...' }\r\n      { albumDetails &&\r\n        <div>\r\n          { /* console.log('ViewAlbum albumDetails', albumDetails) */ }\r\n          <HeaderBreadcrumb albumDetails={ albumDetails } />\r\n          \r\n          <ul>\r\n            { albumDetails.mediaItems.map( function (mediaItem){\r\n              return (\r\n                <li key={mediaItem.id}>\r\n                  <Link to={'/photo/' + mediaItem.id + '/' + albumID + '/' + albumDetails.title }>\r\n                    <figure>\r\n                      <img src={mediaItem.baseUrl} alt='' />\r\n                    </figure>\r\n                  </Link>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n      }\r\n\r\n      <hr />\r\n      <Link to='/'>Back to Albums List</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewAlbum\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport PhotoServiceContext from './PhotoServiceContext'\r\nimport HeaderBreadcrumb from './HeaderBreadcrumb'\r\n\r\nfunction ViewPhoto (props) {\r\n  const photoID = props.match.params.pid\r\n  const albumID = props.match.params.aid\r\n  const albumTitle = props.match.params.atitle\r\n\r\n  const service = useContext(PhotoServiceContext)\r\n\r\n  const [photoDetails, setPhotoDetails] = useState(undefined)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  useEffect(\r\n    function () {\r\n      const promise = service.loadPhotoDetail(photoID)\r\n      promise.then(function (arg) {\r\n        setPhotoDetails(arg)\r\n        setIsLoading(false)\r\n      })\r\n    },\r\n    [props.match] // keep watching this for changes\r\n  )\r\n\r\n  if (!isLoading && !photoDetails) {\r\n    return (\r\n      <div>\r\n        <h2>Photo not found</h2>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      { isLoading && 'Loading...' }\r\n      { photoDetails &&\r\n        <div>\r\n          <HeaderBreadcrumb photoDetails={ photoDetails } albumID={ albumID } albumTitle={ albumTitle } />          \r\n\r\n          <div>\r\n            <img src={photoDetails.baseUrl} />\r\n          </div>\r\n        </div>\r\n      }\r\n\r\n      <hr />\r\n      <Link to='/'>Back to Albums List</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewPhoto\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction About () {\r\n  return <div>\r\n      This site was made with React 16.8 and Google Photos API.\r\n    <br />\r\n    <Link to='/'>Back</Link>\r\n  </div>\r\n}\r\n\r\nexport default About\r\n","class GooglePhotosService {\r\n  constructor (gapiClient) {\r\n    this.gapiClient = gapiClient\r\n  }\r\n\r\n  loadAlbums () {\r\n    return this.gapiClient\r\n      .photoslibrary\r\n      .albums\r\n      .list({})\r\n      .then(function (fullResponse) { // { result: { albums } }\r\n        const albums = fullResponse.result.albums\r\n        // Handle the results here (response.result has the parsed body).\r\n        return albums\r\n      })\r\n  }\r\n\r\n  loadAlbumDetail (id) {\r\n    return this.gapiClient\r\n      .photoslibrary\r\n      .albums\r\n      .get({ albumId: id })\r\n      .then((response) => {\r\n        return response.result\r\n      })\r\n      .then((album) => {\r\n        console.log('loadAlbumDetail - getting media items for', album)\r\n        return this.gapiClient\r\n          .photoslibrary\r\n          .mediaItems\r\n          .search({ albumId: id })\r\n          .then(function (response) {\r\n            const mediaItems = response.result.mediaItems\r\n\r\n            return {\r\n              ...album,\r\n              mediaItems: mediaItems\r\n            }\r\n          })\r\n      })\r\n      .catch(function (e) {\r\n        return undefined\r\n      })\r\n  }\r\n\r\n  loadPhotoDetail (id) {\r\n    return this.gapiClient\r\n      .photoslibrary\r\n      .mediaItems\r\n      .get({ mediaItemId: id })\r\n      .then((response) => {\r\n        return response.result\r\n      })\r\n      .catch(function (e) {\r\n        return undefined\r\n      })\r\n  }\r\n}\r\n\r\nexport default GooglePhotosService\r\n","/* global gapi */\nimport React, { useEffect, useCallback, useState } from 'react'\nimport './App.scss'\nimport AlbumsList from './AlbumsList'\nimport ViewAlbum from './ViewAlbum'\nimport ViewPhoto from './ViewPhoto'\nimport About from './About'\nimport { HashRouter as Router, Route } from 'react-router-dom'\nimport PhotoServiceContext from './PhotoServiceContext'\n// import DummyGooglePhotosService from './DummyGooglePhotosService';\nimport GooglePhotosService from './GooglePhotosService'\n\nconst SCOPE = 'https://www.googleapis.com/auth/photoslibrary.readonly'\n\nfunction App (props) {\n  const [initialising, setInitialising] = useState(true)\n  const [isAuthorised, setIsAuthorised] = useState(false)\n  const [photoService, setPhotoService] = useState(undefined)\n\n  useEffect(\n    () => {\n      console.log('we\\'ve mounted')\n      \n      const intervalId = setInterval(\n        () => {\n          if (!window.gapi) {\n            return\n          }\n\n          clearInterval(intervalId)\n          gapi.load('client:auth2', () => {\n            gapi.client.init({\n              discoveryDocs: ['https://photoslibrary.googleapis.com/$discovery/rest?version=v1'],\n              clientId: props.gapiID,\n              scope: SCOPE\n            }).then(function () {\n              setInitialising(false)\n\n              const auth = gapi.auth2.getAuthInstance()\n              auth.isSignedIn.listen(() => {\n                setIsAuthorised(user.hasGrantedScopes(SCOPE))\n              })\n\n              const user = auth.currentUser.get()\n              const startAuth = user.hasGrantedScopes(SCOPE)\n              setPhotoService(new GooglePhotosService(gapi.client))\n              setIsAuthorised(startAuth)\n\n              // gapi.client.photoslibrary.albums.list({})\n              //   .then(function(response) {\n              //     // Handle the results here (response.result has the parsed body).\n              //     console.log(\"Album Response\", response);\n              //   });\n            })\n          })\n        },\n        100\n      )\n    },\n    []\n  )\n\n  const onSignOut = useCallback(\n    () => {\n      gapi.auth2.getAuthInstance().signOut()\n    },\n    []\n  )\n\n  const onSignIn = useCallback(\n    () => {\n      gapi.auth2.getAuthInstance().signIn()\n    },\n    []\n  )\n\n  if (initialising) {\n    return <div>Initialising...</div>\n  }\n\n  if (!isAuthorised) {\n    return <button onClick={onSignIn}>Sign in</button>\n  }\n\n  return (\n    <div className='App'>\n      <PhotoServiceContext.Provider value={photoService}>\n        <Router>\n          <button onClick={onSignOut}>Sign Out</button>\n\n          <div>\n            <Route path='/' exact component={AlbumsList} />\n            <Route path='/album/:aid' component={ViewAlbum} />\n            <Route path='/about' component={About} />\n            <Route path='/photo/:pid/:aid/:atitle' component={ViewPhoto} />\n          </div>\n        </Router>\n      </PhotoServiceContext.Provider>\n    </div>\n  )\n}\n\nexport default App\n","/* global fetch */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App gapiID={process.env.REACT_APP_GAPI_CLIENT_ID} />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}