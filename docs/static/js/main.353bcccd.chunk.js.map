{"version":3,"sources":["PhotoServiceContext.js","AlbumsList.js","ViewAlbum.js","ViewPhoto.js","About.js","HeaderBar.js","GooglePhotosService.js","App.js","serviceWorker.js","index.js"],"names":["context","createContext","undefined","AlbumsList","service","useContext","PhotoServiceContext","_useState","useState","_useState2","Object","slicedToArray","albums","setAlbums","_useState3","_useState4","isLoading","setIsLoading","useEffect","loadAlbums","then","arg","newAlbums","map","obj","react_default","a","createElement","key","id","react_router_dom","to","src","coverPhotoBaseUrl","title","ViewAlbum","props","albumID","match","params","albumDetails","setAlbumDetails","loadAlbumDetail","mediaItems","mediaItem","baseUrl","alt","ViewPhoto","photoID","photoDetails","setPhotoDetails","loadPhotoDetail","About","HeaderBar","GooglePhotosService","gapiClient","classCallCheck","this","photoslibrary","list","fullResponse","result","_this","get","albumId","response","album","console","log","search","objectSpread","catch","e","mediaItemId","SCOPE","App","initialising","setInitialising","isAuthorised","setIsAuthorised","_useState5","_useState6","photoService","setPhotoService","intervalId","setInterval","window","gapi","clearInterval","load","client","init","discoveryDocs","clientId","gapiID","scope","auth","auth2","getAuthInstance","isSignedIn","listen","user","hasGrantedScopes","currentUser","startAuth","onSignOut","useCallback","signOut","onSignIn","signIn","className","Provider","value","src_HeaderBar","onClick","react_router","path","exact","component","Boolean","location","hostname","ReactDOM","render","src_App","process","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.353bcccd.chunk.js","sourcesContent":["import { createContext } from 'react'\r\n\r\nconst context = createContext(undefined)\r\n\r\nexport default context\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport './AlbumsList.scss'\r\nimport { Link } from 'react-router-dom'\r\nimport PhotoServiceContext from './PhotoServiceContext'\r\n\r\nfunction AlbumsList () {\r\n  const service = useContext(PhotoServiceContext) // new GooglePhotosService();\r\n  const [albums, setAlbums] = useState([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  // useEffect only runs once to get the promise data initially.\r\n  useEffect(function () {\r\n    const promise = service.loadAlbums()\r\n    promise.then(function (arg) {\r\n      setAlbums(arg)\r\n      setIsLoading(false)\r\n    })\r\n  },\r\n  []\r\n  )\r\n\r\n  const newAlbums = albums.map(function (obj) {\r\n    return (\r\n      <li key={obj.id}>\r\n        <Link to={'/album/' + obj.id}>\r\n          <figure>\r\n            <img src={obj.coverPhotoBaseUrl} />            \r\n            <figcaption>\r\n              <h3>\r\n                { obj.title }\r\n              </h3>\r\n            </figcaption>\r\n          </figure>\r\n        </Link>\r\n        <br />\r\n      </li>\r\n    );\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      { isLoading && 'Loading...' }\r\n      <div>\r\n        <h2>Albums</h2>\r\n        <ul>\r\n          { newAlbums }\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AlbumsList\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport './ViewAlbum.scss'\r\nimport { Link } from 'react-router-dom'\r\n// import DummyGooglePhotosService from './DummyGooglePhotosService';\r\nimport PhotoServiceContext from './PhotoServiceContext'\r\n\r\nfunction ViewAlbum (props) {\r\n  const albumID = props.match.params.id\r\n\r\n  // const service = new DummyGooglePhotosService();\r\n  const service = useContext(PhotoServiceContext)\r\n\r\n  const [albumDetails, setAlbumDetails] = useState(undefined)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  useEffect(\r\n    function () {\r\n      const promise = service.loadAlbumDetail(albumID)\r\n      promise.then(function (arg) {\r\n        setAlbumDetails(arg)\r\n        setIsLoading(false)\r\n      })\r\n    },\r\n    [props.match] // keep watching this for changes\r\n  )\r\n\r\n  // If the service is finished loading the album, but the album doesnt exist\r\n  if (!isLoading && !albumDetails) { // isLoaded && !albumDetails\r\n    return (\r\n      <div>\r\n        <h2>Album not found</h2>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      { isLoading && 'Loading...' }\r\n      { albumDetails &&\r\n        <div>\r\n          <h2>{albumDetails.title}</h2>\r\n          <ul>\r\n            { albumDetails.mediaItems.map( function (mediaItem){\r\n              return (\r\n                <li key={mediaItem.id}>\r\n                  <Link to={'/photo/' + mediaItem.id}>\r\n                    <figure>\r\n                      <img src={mediaItem.baseUrl} alt='' />\r\n                    </figure>\r\n                  </Link>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n      }\r\n\r\n      <hr />\r\n      <Link to='/'>Back to Albums List</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewAlbum\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport PhotoServiceContext from './PhotoServiceContext'\r\n\r\nfunction ViewPhoto (props) {\r\n  const photoID = props.match.params.id\r\n  const service = useContext(PhotoServiceContext)\r\n\r\n  const [photoDetails, setPhotoDetails] = useState(undefined)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  useEffect(\r\n    function () {\r\n      const promise = service.loadPhotoDetail(photoID)\r\n      promise.then(function (arg) {\r\n        setPhotoDetails(arg)\r\n        setIsLoading(false)\r\n      })\r\n    },\r\n    [props.match] // keep watching this for changes\r\n  )\r\n\r\n  if (!isLoading && !photoDetails) {\r\n    return (\r\n      <div>\r\n        <h2>Photo not found</h2>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      { isLoading && 'Loading...' }\r\n      { photoDetails &&\r\n        <div>\r\n          <h2>Photo</h2>\r\n          <div>\r\n            <img src={photoDetails.baseUrl} />\r\n          </div>\r\n        </div>\r\n      }\r\n\r\n      <hr />\r\n      <Link to='/'>Back to Albums List</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewPhoto\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction About () {\r\n  return <div>\r\n      This site was made with React 16.8 and Google Photos API.\r\n    <br />\r\n    <Link to='/'>Back</Link>\r\n  </div>\r\n}\r\n\r\nexport default About\r\n","import React from 'react'\r\nimport './HeaderBar.scss'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction HeaderBar () {\r\n  return (\r\n    <div>\r\n      <Link to='/'>Albums List</Link><br />\r\n      <Link to='/about'>About</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HeaderBar\r\n","class GooglePhotosService {\r\n  constructor (gapiClient) {\r\n    this.gapiClient = gapiClient\r\n  }\r\n\r\n  loadAlbums () {\r\n    return this.gapiClient\r\n      .photoslibrary\r\n      .albums\r\n      .list({})\r\n      .then(function (fullResponse) { // { result: { albums } }\r\n        const albums = fullResponse.result.albums\r\n        // Handle the results here (response.result has the parsed body).\r\n        return albums\r\n      })\r\n  }\r\n\r\n  loadAlbumDetail (id) {\r\n    return this.gapiClient\r\n      .photoslibrary\r\n      .albums\r\n      .get({ albumId: id })\r\n      .then((response) => {\r\n        return response.result\r\n      })\r\n      .then((album) => {\r\n        console.log('getting media items for', album)\r\n        return this.gapiClient\r\n          .photoslibrary\r\n          .mediaItems\r\n          .search({ albumId: id })\r\n          .then(function (response) {\r\n            const mediaItems = response.result.mediaItems\r\n\r\n            return {\r\n              ...album,\r\n              mediaItems: mediaItems\r\n            }\r\n          })\r\n      })\r\n      .catch(function (e) {\r\n        return undefined\r\n      })\r\n  }\r\n\r\n  loadPhotoDetail (id) {\r\n    return this.gapiClient\r\n      .photoslibrary\r\n      .mediaItems\r\n      .get({ mediaItemId: id })\r\n      .then((response) => {\r\n        return response.result\r\n      })\r\n      .catch(function (e) {\r\n        return undefined\r\n      })\r\n  }\r\n}\r\n\r\nexport default GooglePhotosService\r\n","/* global gapi */\nimport React, { useEffect, useCallback, useState } from 'react'\nimport './App.scss'\nimport AlbumsList from './AlbumsList'\nimport ViewAlbum from './ViewAlbum'\nimport ViewPhoto from './ViewPhoto'\nimport About from './About'\nimport HeaderBar from './HeaderBar'\nimport { HashRouter as Router, Route } from 'react-router-dom'\nimport PhotoServiceContext from './PhotoServiceContext'\n// import DummyGooglePhotosService from './DummyGooglePhotosService';\nimport GooglePhotosService from './GooglePhotosService'\n\nconst SCOPE = 'https://www.googleapis.com/auth/photoslibrary.readonly'\n\nfunction App (props) {\n  const [initialising, setInitialising] = useState(true)\n  const [isAuthorised, setIsAuthorised] = useState(false)\n  const [photoService, setPhotoService] = useState(undefined)\n\n  useEffect(\n    () => {\n      console.log('we\\'ve mounted')\n      const intervalId = setInterval(\n        () => {\n          if (!window.gapi) {\n            return\n          }\n\n          clearInterval(intervalId)\n          gapi.load('client:auth2', () => {\n            gapi.client.init({\n              discoveryDocs: ['https://photoslibrary.googleapis.com/$discovery/rest?version=v1'],\n              clientId: props.gapiID,\n              scope: SCOPE\n            }).then(function () {\n              setInitialising(false)\n\n              const auth = gapi.auth2.getAuthInstance()\n              auth.isSignedIn.listen(() => {\n                setIsAuthorised(user.hasGrantedScopes(SCOPE))\n              })\n\n              const user = auth.currentUser.get()\n              const startAuth = user.hasGrantedScopes(SCOPE)\n              setPhotoService(new GooglePhotosService(gapi.client))\n              setIsAuthorised(startAuth)\n\n              // gapi.client.photoslibrary.albums.list({})\n              //   .then(function(response) {\n              //     // Handle the results here (response.result has the parsed body).\n              //     console.log(\"Album Response\", response);\n              //   });\n            })\n          })\n        },\n        100\n      )\n    },\n    []\n  )\n\n  const onSignOut = useCallback(\n    () => {\n      gapi.auth2.getAuthInstance().signOut()\n    },\n    []\n  )\n\n  const onSignIn = useCallback(\n    () => {\n      gapi.auth2.getAuthInstance().signIn()\n    },\n    []\n  )\n\n  if (initialising) {\n    return <div>Initialising...</div>\n  }\n\n  if (!isAuthorised) {\n    return <button onClick={onSignIn}>Sign in</button>\n  }\n\n  return (\n    <div className='App'>\n      <PhotoServiceContext.Provider value={photoService}>\n        <Router>\n          <HeaderBar />\n\n          <button onClick={onSignOut}>Sign Out</button>\n\n          <div>\n            <Route path='/' exact component={AlbumsList} />\n            <Route path='/album/:id' component={ViewAlbum} />\n            <Route path='/about' component={About} />\n            <Route path='/photo/:id' component={ViewPhoto} />\n          </div>\n        </Router>\n      </PhotoServiceContext.Provider>\n    </div>\n  )\n}\n\nexport default App\n","/* global fetch */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App gapiID={process.env.REACT_APP_GAPI_CLIENT_ID} />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}