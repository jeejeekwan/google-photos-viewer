(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(36)},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(16),i=n.n(c),o=(n(27),n(3)),r=(n(28),n(29),n(2)),u=Object(a.createContext)(void 0);var m=function(){var e=Object(a.useContext)(u),t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1],m=Object(a.useState)(!0),s=Object(o.a)(m,2),b=s[0],d=s[1];Object(a.useEffect)(function(){e.loadAlbums().then(function(e){i(e),d(!1)})},[]);var h=c.map(function(e){return l.a.createElement("li",{key:e.id},l.a.createElement(r.b,{to:"/album/"+e.id},l.a.createElement("figure",null,l.a.createElement("img",{src:e.coverPhotoBaseUrl}),l.a.createElement("figcaption",null,l.a.createElement("h3",null,e.title)))),l.a.createElement("br",null))});return l.a.createElement("div",null,b&&"Loading...",l.a.createElement("div",null,l.a.createElement("h2",null,"Albums"),l.a.createElement("ul",null,h)))};n(34);var s=function(e){var t=e.match.params.id,n=Object(a.useContext)(u),c=Object(a.useState)(void 0),i=Object(o.a)(c,2),m=i[0],s=i[1],b=Object(a.useState)(!0),d=Object(o.a)(b,2),h=d[0],E=d[1];return Object(a.useEffect)(function(){n.loadAlbumDetail(t).then(function(e){s(e),E(!1)})},[e.match]),h||m?l.a.createElement("div",null,h&&"Loading...",m&&l.a.createElement("div",null,l.a.createElement("h2",null,m.title),l.a.createElement("ul",null,m.mediaItems.map(function(e){return l.a.createElement("li",{key:e.id},l.a.createElement(r.b,{to:"/photo/"+e.id},l.a.createElement("figure",null,l.a.createElement("img",{src:e.baseUrl,alt:""}))))}))),l.a.createElement("hr",null),l.a.createElement(r.b,{to:"/"},"Back to Albums List")):l.a.createElement("div",null,l.a.createElement("h2",null,"Album not found"))};var b=function(e){var t=e.match.params.id,n=Object(a.useContext)(u),c=Object(a.useState)(void 0),i=Object(o.a)(c,2),m=i[0],s=i[1],b=Object(a.useState)(!0),d=Object(o.a)(b,2),h=d[0],E=d[1];return Object(a.useEffect)(function(){n.loadPhotoDetail(t).then(function(e){s(e),E(!1)})},[e.match]),h||m?l.a.createElement("div",null,h&&"Loading...",m&&l.a.createElement("div",null,l.a.createElement("h2",null,"Photo"),l.a.createElement("div",null,l.a.createElement("img",{src:m.baseUrl}))),l.a.createElement("hr",null),l.a.createElement(r.b,{to:"/"},"Back to Albums List")):l.a.createElement("div",null,l.a.createElement("h2",null,"Photo not found"))};var d=function(){return l.a.createElement("div",null,"This site was made with React 16.8 and Google Photos API.",l.a.createElement("br",null),l.a.createElement(r.b,{to:"/"},"Back"))};n(35);var h=function(){return l.a.createElement("div",null,l.a.createElement(r.b,{to:"/"},"Albums List"),l.a.createElement("br",null),l.a.createElement(r.b,{to:"/about"},"About"))},E=n(7),f=n(21),p=n(19),v=n(20),g=function(){function e(t){Object(p.a)(this,e),this.gapiClient=t}return Object(v.a)(e,[{key:"loadAlbums",value:function(){return this.gapiClient.photoslibrary.albums.list({}).then(function(e){return e.result.albums})}},{key:"loadAlbumDetail",value:function(e){var t=this;return this.gapiClient.photoslibrary.albums.get({albumId:e}).then(function(e){return e.result}).then(function(n){return console.log("getting media items for",n),t.gapiClient.photoslibrary.mediaItems.search({albumId:e}).then(function(e){var t=e.result.mediaItems;return Object(f.a)({},n,{mediaItems:t})})}).catch(function(e){})}},{key:"loadPhotoDetail",value:function(e){return this.gapiClient.photoslibrary.mediaItems.get({mediaItemId:e}).then(function(e){return e.result}).catch(function(e){})}}]),e}(),O="https://www.googleapis.com/auth/photoslibrary.readonly";var j=function(e){var t=Object(a.useState)(!0),n=Object(o.a)(t,2),c=n[0],i=n[1],f=Object(a.useState)(!1),p=Object(o.a)(f,2),v=p[0],j=p[1],I=Object(a.useState)(void 0),w=Object(o.a)(I,2),k=w[0],y=w[1];Object(a.useEffect)(function(){console.log("we've mounted");var t=setInterval(function(){window.gapi&&(clearInterval(t),gapi.load("client:auth2",function(){gapi.client.init({discoveryDocs:["https://photoslibrary.googleapis.com/$discovery/rest?version=v1"],clientId:e.gapiID,scope:O}).then(function(){i(!1);var e=gapi.auth2.getAuthInstance();e.isSignedIn.listen(function(){j(t.hasGrantedScopes(O))});var t=e.currentUser.get(),n=t.hasGrantedScopes(O);y(new g(gapi.client)),j(n)})}))},100)},[]);var A=Object(a.useCallback)(function(){gapi.auth2.getAuthInstance().signOut()},[]),S=Object(a.useCallback)(function(){gapi.auth2.getAuthInstance().signIn()},[]);return c?l.a.createElement("div",null,"Initialising..."):v?l.a.createElement("div",{className:"App"},l.a.createElement(u.Provider,{value:k},l.a.createElement(r.a,null,l.a.createElement(h,null),l.a.createElement("button",{onClick:A},"Sign Out"),l.a.createElement("div",null,l.a.createElement(E.a,{path:"/",exact:!0,component:m}),l.a.createElement(E.a,{path:"/album/:id",component:s}),l.a.createElement(E.a,{path:"/about",component:d}),l.a.createElement(E.a,{path:"/photo/:id",component:b}))))):l.a.createElement("button",{onClick:S},"Sign in")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(j,{gapiID:"101744662563-frd5q7291nvegithu7pi3i5dcmlp79ra.apps.googleusercontent.com"}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.353bcccd.chunk.js.map