(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(36)},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(16),i=a.n(c),o=(a(27),a(3)),r=(a(28),a(29),a(2)),u=Object(n.createContext)(void 0);a(30);var m=function(e){return l.a.createElement("div",{className:"header"},l.a.createElement("h2",null,e.albumDetails&&e.albumDetails.title||e.photoDetails?l.a.createElement(r.b,{to:"/"},"Albums"):"Albums",e.albumDetails&&e.albumDetails.title&&l.a.createElement("span",null,"\xa0\xbb\xa0",e.albumDetails.title),e.photoDetails&&e.albumID&&e.albumTitle&&l.a.createElement("span",null,"\xa0\xbb\xa0",l.a.createElement(r.b,{to:"/album/".concat(e.albumID)},e.albumTitle)),e.photoDetails&&l.a.createElement("span",null,"\xa0\xbb ",e.photoDetails.filename.split(".")[0])))};var s=function(){var e=Object(n.useContext)(u),t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(!0),b=Object(o.a)(s,2),h=b[0],d=b[1];Object(n.useEffect)(function(){e.loadAlbums().then(function(e){i(e),d(!1)})},[]);var p=c.map(function(e){return l.a.createElement("li",{key:e.id},l.a.createElement(r.b,{to:"/album/"+e.id},l.a.createElement("figure",null,l.a.createElement("img",{src:e.coverPhotoBaseUrl}),l.a.createElement("figcaption",null,l.a.createElement("h3",null,e.title)))),l.a.createElement("br",null))});return l.a.createElement("div",null,h&&"Loading...",l.a.createElement("div",null,l.a.createElement(m,null),l.a.createElement("ul",{className:"albums"},p)),l.a.createElement("hr",null),l.a.createElement(r.b,{to:"/"},"Back to Albums List"))};a(35);var b=function(e){var t=e.match.params.aid,a=Object(n.useContext)(u),c=Object(n.useState)(void 0),i=Object(o.a)(c,2),s=i[0],b=i[1],h=Object(n.useState)(!0),d=Object(o.a)(h,2),p=d[0],E=d[1];return Object(n.useEffect)(function(){a.loadAlbumDetail(t).then(function(e){b(e),E(!1)})},[e.match]),p||s?l.a.createElement("div",null,p&&"Loading...",s&&l.a.createElement("div",null,l.a.createElement(m,{albumDetails:s}),l.a.createElement("ul",null,s.mediaItems.map(function(e){return l.a.createElement("li",{key:e.id},l.a.createElement(r.b,{to:"/photo/"+e.id+"/"+t+"/"+s.title},l.a.createElement("figure",null,l.a.createElement("img",{src:e.baseUrl,alt:""}))))}))),l.a.createElement("hr",null),l.a.createElement(r.b,{to:"/"},"Back to Albums List")):l.a.createElement("div",null,l.a.createElement("h2",null,"Album not found"))};var h=function(e){var t=e.match.params.pid,a=e.match.params.aid,c=e.match.params.atitle,i=Object(n.useContext)(u),s=Object(n.useState)(void 0),b=Object(o.a)(s,2),h=b[0],d=b[1],p=Object(n.useState)(!0),E=Object(o.a)(p,2),f=E[0],v=E[1];return Object(n.useEffect)(function(){i.loadPhotoDetail(t).then(function(e){d(e),v(!1)})},[e.match]),f||h?l.a.createElement("div",null,f&&"Loading...",h&&l.a.createElement("div",null,l.a.createElement(m,{photoDetails:h,albumID:a,albumTitle:c}),l.a.createElement("div",null,l.a.createElement("img",{src:h.baseUrl}))),l.a.createElement("hr",null),l.a.createElement(r.b,{to:"/"},"Back to Albums List")):l.a.createElement("div",null,l.a.createElement("h2",null,"Photo not found"))};var d=function(){return l.a.createElement("div",null,"This site was made with React 16.8 and Google Photos API.",l.a.createElement("br",null),l.a.createElement(r.b,{to:"/"},"Back"))},p=a(7),E=a(21),f=a(19),v=a(20),g=function(){function e(t){Object(f.a)(this,e),this.gapiClient=t}return Object(v.a)(e,[{key:"loadAlbums",value:function(){return this.gapiClient.photoslibrary.albums.list({}).then(function(e){return e.result.albums})}},{key:"loadAlbumDetail",value:function(e){var t=this;return this.gapiClient.photoslibrary.albums.get({albumId:e}).then(function(e){return e.result}).then(function(a){return console.log("loadAlbumDetail - getting media items for",a),t.gapiClient.photoslibrary.mediaItems.search({albumId:e}).then(function(e){var t=e.result.mediaItems;return Object(E.a)({},a,{mediaItems:t})})}).catch(function(e){})}},{key:"loadPhotoDetail",value:function(e){return this.gapiClient.photoslibrary.mediaItems.get({mediaItemId:e}).then(function(e){return e.result}).catch(function(e){})}}]),e}(),O="https://www.googleapis.com/auth/photoslibrary.readonly";var j=function(e){var t=Object(n.useState)(!0),a=Object(o.a)(t,2),c=a[0],i=a[1],m=Object(n.useState)(!1),E=Object(o.a)(m,2),f=E[0],v=E[1],j=Object(n.useState)(void 0),I=Object(o.a)(j,2),D=I[0],w=I[1];Object(n.useEffect)(function(){console.log("we've mounted");var t=setInterval(function(){window.gapi&&(clearInterval(t),gapi.load("client:auth2",function(){gapi.client.init({discoveryDocs:["https://photoslibrary.googleapis.com/$discovery/rest?version=v1"],clientId:e.gapiID,scope:O}).then(function(){i(!1);var e=gapi.auth2.getAuthInstance();e.isSignedIn.listen(function(){v(t.hasGrantedScopes(O))});var t=e.currentUser.get(),a=t.hasGrantedScopes(O);w(new g(gapi.client)),v(a)})}))},100)},[]);var k=Object(n.useCallback)(function(){gapi.auth2.getAuthInstance().signOut()},[]),y=Object(n.useCallback)(function(){gapi.auth2.getAuthInstance().signIn()},[]);return c?l.a.createElement("div",null,"Initialising..."):f?l.a.createElement("div",{className:"App"},l.a.createElement(u.Provider,{value:D},l.a.createElement(r.a,null,l.a.createElement("button",{onClick:k},"Sign Out"),l.a.createElement("div",null,l.a.createElement(p.a,{path:"/",exact:!0,component:s}),l.a.createElement(p.a,{path:"/album/:aid",component:b}),l.a.createElement(p.a,{path:"/about",component:d}),l.a.createElement(p.a,{path:"/photo/:pid/:aid/:atitle",component:h}))))):l.a.createElement("button",{onClick:y},"Sign in")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(j,{gapiID:"101744662563-frd5q7291nvegithu7pi3i5dcmlp79ra.apps.googleusercontent.com"}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.a3f1a148.chunk.js.map